<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>  jQuery页面返回顶部效果实现 |  Janet Wu </title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="author" content="janet wu">
  <meta name="description" content="Hi - I'm Janet. I'm a web frontend developer.">
  <link rel="shortcut icon" href="/img/favicon.ico" /> 
  <link rel="stylesheet" type="text/css" href="/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="/css/syntax.css">
  <link rel="stylesheet" type="text/css" href="/css/style.css">
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.1/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body>
  <header>
    <div class="top boxed">
      <h1><a href="/" title="Janet Wu"><img src="/img/logo.png" alt="Janet Wu"></a></h1>
      <span class="slogon">less is more 越简单,越快乐</span>  
      <nav>
        <ul>
          <li><a href="/archive/" title="Archive"><i class="fa fa-list-ul"></i></a></li>
          <li><a href="/tags/" title="Tags"><i class="fa fa-tags"></i></a></li>
          <li><a href="/about/" title="About"><i class="fa fa-user"></i></a></li>
        </ul>
      </nav>
    </div>
  </header>
  <div class="main boxed">
    
      <article>
  <h1>jQuery页面返回顶部效果实现</h1>
  <p class="meta">
    <time datetime=''><i class="fa fa-clock-o"></i>
    2014-09-21</time>
    <span><i class="fa fa-tag"></i></span>
    
      <a href="/tags/#jQuery">#jQuery</a>
    
      <a href="/tags/#CSS3">#CSS3</a>
    </p>
  
  <p>一直想实现页面返回顶部效果，因为博客有些文章确实比较长需要这个小功能，终于有空给它加上了。</p><h2>HTML:</h2><div class='highlight'><pre><code class='html'><span class='nt'>&lt;a</span> <span class='na'>id=</span><span class='s'>&quot;scrolltop&quot;</span><span class='nt'>&gt;</span>
	<span class='nt'>&lt;span</span> <span class='na'>class=</span><span class='s'>&quot;icon&quot;</span><span class='nt'>&gt;</span>
	  <span class='nt'>&lt;i</span> <span class='na'>class=</span><span class='s'>&quot;upArrow&quot;</span><span class='nt'>&gt;&lt;/i&gt;</span>
	<span class='nt'>&lt;/span&gt;</span>
<span class='nt'>&lt;/a&gt;</span>
</code></pre></div><h2>CSS:</h2><p>向上箭头是用CSS3实现的，不是一张图片，我可以说我不能马上找到满意的图片才这么做的吗，想要什么颜色随你便。</p><div class='highlight'><pre><code class='css'><span class='nf'>#scrolltop</span><span class='p'>{</span>
	<span class='k'>display</span><span class='o'>:</span> <span class='k'>none</span><span class='p'>;</span>
	<span class='k'>background-color</span><span class='o'>:</span> <span class='n'>rgba</span><span class='p'>(</span><span class='m'>0</span><span class='o'>,</span><span class='m'>0</span><span class='o'>,</span><span class='m'>0</span><span class='o'>,</span><span class='m'>0</span><span class='o'>.</span><span class='m'>3</span><span class='p'>);</span>
	<span class='k'>border</span><span class='o'>-</span><span class='n'>radius</span><span class='o'>:</span> <span class='m'>4px</span><span class='p'>;</span>
	<span class='k'>position</span><span class='o'>:</span> <span class='k'>fixed</span><span class='p'>;</span>
	<span class='k'>bottom</span><span class='o'>:</span> <span class='m'>20px</span><span class='p'>;</span>
	<span class='k'>right</span><span class='o'>:</span> <span class='m'>20px</span><span class='p'>;</span>
	<span class='k'>cursor</span><span class='o'>:</span> <span class='k'>pointer</span><span class='p'>;</span>
	<span class='o'>-</span><span class='n'>webkit</span><span class='o'>-</span><span class='n'>transition</span><span class='o'>:</span> <span class='k'>background-color</span> <span class='m'>0.5s</span> <span class='n'>ease</span><span class='p'>;</span>
    <span class='o'>-</span><span class='n'>moz</span><span class='o'>-</span><span class='n'>transition</span><span class='o'>:</span> <span class='k'>background-color</span> <span class='m'>0.5s</span> <span class='n'>ease</span><span class='p'>;</span>
    <span class='o'>-</span><span class='n'>o</span><span class='o'>-</span><span class='n'>transition</span><span class='o'>:</span> <span class='k'>background-color</span> <span class='m'>0.5s</span> <span class='n'>ease</span><span class='p'>;</span>
    <span class='n'>transition</span><span class='o'>:</span> <span class='k'>background-color</span> <span class='m'>0.5s</span> <span class='n'>ease</span><span class='p'>;</span>
<span class='p'>}</span>
<span class='nf'>#scrolltop</span><span class='nd'>:hover</span><span class='p'>{</span>
	<span class='k'>background-color</span><span class='o'>:</span> <span class='n'>rgba</span><span class='p'>(</span><span class='m'>225</span><span class='o'>,</span><span class='m'>53</span><span class='o'>,</span><span class='m'>141</span><span class='o'>,</span><span class='m'>0</span><span class='o'>.</span><span class='m'>8</span><span class='p'>);</span>
<span class='p'>}</span>
<span class='nt'>span</span><span class='nc'>.icon</span> <span class='p'>{</span>
	<span class='k'>height</span><span class='o'>:</span> <span class='m'>32px</span><span class='p'>;</span>
	<span class='k'>width</span><span class='o'>:</span> <span class='m'>32px</span><span class='p'>;</span>
	<span class='k'>position</span><span class='o'>:</span> <span class='k'>relative</span><span class='p'>;</span>
	<span class='k'>margin</span><span class='o'>:</span> <span class='m'>8px</span> <span class='m'>8px</span> <span class='m'>3px</span><span class='p'>;</span>
	<span class='k'>overflow</span><span class='o'>:</span> <span class='k'>hidden</span><span class='p'>;</span>
	<span class='k'>display</span><span class='o'>:</span> <span class='k'>inline</span><span class='o'>-</span><span class='k'>block</span><span class='p'>;</span>
<span class='p'>}</span>
<span class='nt'>i</span><span class='nc'>.upArrow</span> <span class='p'>{</span>
	<span class='k'>height</span><span class='o'>:</span> <span class='m'>0px</span><span class='p'>;</span>
	<span class='k'>width</span><span class='o'>:</span> <span class='m'>0px</span><span class='p'>;</span>
	<span class='k'>border-width</span><span class='o'>:</span> <span class='m'>16px</span><span class='p'>;</span>
	<span class='k'>border-style</span><span class='o'>:</span> <span class='k'>solid</span><span class='p'>;</span>
	<span class='k'>border-color</span><span class='o'>:</span> <span class='k'>transparent</span> <span class='k'>transparent</span> <span class='m'>#fff</span> <span class='k'>transparent</span><span class='p'>;</span>
	<span class='k'>position</span><span class='o'>:</span> <span class='k'>absolute</span><span class='p'>;</span>
	<span class='k'>bottom</span><span class='o'>:</span> <span class='m'>16px</span><span class='p'>;</span>
	<span class='k'>left</span><span class='o'>:</span> <span class='m'>0</span><span class='p'>;</span>
<span class='p'>}</span>
<span class='nt'>i</span><span class='nc'>.upArrow</span><span class='nd'>:after</span> <span class='p'>{</span>
	<span class='k'>content</span><span class='o'>:</span> <span class='s1'>&#39;&#39;</span><span class='p'>;</span>
	<span class='k'>width</span><span class='o'>:</span> <span class='m'>12px</span><span class='p'>;</span>
	<span class='k'>height</span><span class='o'>:</span> <span class='m'>16px</span><span class='p'>;</span>
	<span class='k'>background-color</span><span class='o'>:</span> <span class='m'>#fff</span><span class='p'>;</span>
	<span class='k'>position</span><span class='o'>:</span> <span class='k'>absolute</span><span class='p'>;</span>
	<span class='k'>top</span><span class='o'>:</span> <span class='m'>16px</span><span class='p'>;</span>
	<span class='k'>right</span><span class='o'>:</span> <span class='m'>-6px</span><span class='p'>;</span>
<span class='p'>}</span>
</code></pre></div><h2>JS:</h2><p>我也是从别人copy过来的代码，但是优化了一下，1）缓存多次用到的数据 2）window scroll事件加了延时处理。</p><div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>$scrolltopBtn</span> <span class='o'>=</span> <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;#scrolltop&#39;</span><span class='p'>),</span>
    <span class='nx'>_timeoutId</span><span class='p'>;</span>
<span class='nx'>$</span><span class='p'>(</span><span class='nb'>window</span><span class='p'>).</span><span class='nx'>scroll</span><span class='p'>(</span><span class='kd'>function</span> <span class='p'>()</span> <span class='p'>{</span>
  <span class='k'>if</span><span class='p'>(</span><span class='nx'>_timeoutId</span><span class='p'>){</span>
    <span class='nx'>clearTimeout</span><span class='p'>(</span><span class='nx'>_timeoutId</span><span class='p'>);</span>
  <span class='p'>}</span>
  <span class='nx'>_timeoutId</span> <span class='o'>=</span>  <span class='nx'>setTimeout</span><span class='p'>(</span><span class='kd'>function</span><span class='p'>(){</span>
      <span class='k'>if</span> <span class='p'>(</span><span class='nx'>$</span><span class='p'>(</span><span class='k'>this</span><span class='p'>).</span><span class='nx'>scrollTop</span><span class='p'>()</span> <span class='o'>&gt;</span> <span class='mi'>100</span><span class='p'>)</span> <span class='p'>{</span>
        <span class='nx'>$scrolltopBtn</span><span class='p'>.</span><span class='nx'>fadeIn</span><span class='p'>();</span>
      <span class='p'>}</span> <span class='k'>else</span> <span class='p'>{</span>
        <span class='nx'>$scrolltopBtn</span><span class='p'>.</span><span class='nx'>fadeOut</span><span class='p'>();</span>
      <span class='p'>}</span>
    <span class='p'>},</span> <span class='mi'>100</span><span class='p'>);</span>
<span class='p'>});</span>
<span class='nx'>$scrolltopBtn</span><span class='p'>.</span><span class='nx'>click</span><span class='p'>(</span><span class='kd'>function</span> <span class='p'>()</span> <span class='p'>{</span>
  <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;body,html&#39;</span><span class='p'>).</span><span class='nx'>animate</span><span class='p'>({</span>
    <span class='nx'>scrollTop</span><span class='o'>:</span> <span class='mi'>0</span>
  <span class='p'>},</span> <span class='mi'>800</span><span class='p'>);</span>
  <span class='k'>return</span> <span class='kc'>false</span><span class='p'>;</span>
<span class='p'>});</span>
</code></pre></div>
</article>
<div class="divider clearfix">
  
 
    <a class="prev" href="/2014/06/15/blog-with-jekyll.html" title="用jekyll搭建博客"><i class="fa fa-arrow-left"></i> 用jekyll搭建博客</a>
  
  
  
  
  
    <a class="next" href="/2014/10/22/mai-li-hao-jing.html" title="麦里浩径徒步">麦里浩径徒步 <i class="fa fa-arrow-right"></i></a>
 
  
</div>
<div id="disqus_thread"></div>

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<script type="text/javascript" src="/js/jquery-1.9.1.min.js"></script>
<script>
  $(function(){
    $('img.lazy').lazyload({
        effect : "fadeIn"
    });
    
    var $scrolltopBtn = $('#scrolltop'),
        _timeoutId;
    $(window).scroll(function () {
      if(_timeoutId){
        clearTimeout(_timeoutId);
      }
      _timeoutId =  setTimeout(function(){
          if ($(this).scrollTop() > 100) {
            $scrolltopBtn.fadeIn();
          } else {
            $scrolltopBtn.fadeOut();
          }
        }, 100);
    });
    $scrolltopBtn.click(function () {
      $('body,html').animate({
        scrollTop: 0
      }, 800);
      return false;
    });
  });
</script>
<script type="text/javascript">
  var disqus_shortname = 'janetwu';
  window.onload = function(){
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    
  }
</script>




      
  </div>
  <a id="scrolltop">
    <span class="icon">
      <i class="upArrow"></i>
    </span>
  </a>
  <footer class="boxed">
    <span>© 2014 janet wu | powered by jekyll</span>
    <a href="mailto:janetwume@gmail.com" title="mail to me"><i class="fa fa-envelope"></i></a>
    <a href="https://twitter.com/janetwume" target="_blank"  title="twitter"><i class="fa fa-twitter"></i></a>
    <a href="https://github.com/janetwu" target="_blank"  title="github"><i class="fa fa-github"></i></a>
  </footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51907563-1', 'janetwu.info');
  ga('send', 'pageview');

</script>
</body>
</html>